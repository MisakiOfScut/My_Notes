# 系统调用

提供接口让用户程序能够受限地访问硬件设备



![image-20210420165943276](C:\Users\misaki\AppData\Roaming\Typora\typora-user-images\image-20210420165943276.png)



返回long类型值表示成功/错误，一般0成功，负数错误并且将错误码写入全局变量errno



每个系统调用有一个唯一标识的系统调用号

> 如果一个系统调用被删除，它的调用号不允许被复用，防止以前编译的程序调用这个syscall ，但是实际调用的是新的syscall



## 系统调用的方法

用户程序无法直接执行内核代码，因为内核空间是受保护的，所以需要一种手段通知系统切换到内核态执行系统调用

这种手段是通过`软中断`实现的：通过引发一个异常促使系统切换到内核态去执行异常处理程序，而该异常处理程序实际上是系统调用程序

> 指定系统调用：x86上，系统调用前用户空间会把相应的系统调用号放入eax寄存器
>
> 系统调用参数：？和函数调用类似，参数可以放入寄存器，如果大于6个多的就放在栈上
>
> 返回值：存入eax寄存器

![image-20210420172107570](C:\Users\misaki\AppData\Roaming\Typora\typora-user-images\image-20210420172107570.png)